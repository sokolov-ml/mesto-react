(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],[,,,,function(e,t,a){e.exports=a.p+"static/media/header__logo.855a8c98.svg"},,,function(e,t,a){e.exports=a.p+"static/media/profile__photo.62cf7cfc.png"},function(e,t,a){e.exports=a.p+"static/media/profile__edit.58afbe73.svg"},function(e,t,a){e.exports=a.p+"static/media/profile__add.bdfb8ebb.svg"},function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),o=a.n(c),i=(a(15),a(1)),l=(a(16),a(4)),s=a.n(l);function p(e){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:e.logo,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo"}))}var u=a(5),m=a(6),d=new(function(){function e(t){Object(u.a)(this,e),this._options=t,this._url=t.baseUrl,this._token=t.headers.authorization,this._path={user:"/users/me",cards:"/cards",avatar:"/users/me/avatar"}}return Object(m.a)(e,[{key:"_fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2?arguments[2]:void 0;return fetch("".concat(this._options.baseUrl).concat(e),{headers:this._options.headers,method:t,body:JSON.stringify(a)}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getCurrentUserInfo",value:function(){return this._fetch(this._path.user)}},{key:"updateCurrentUserInfo",value:function(e,t){return this._fetch(this._path.user,"PATCH",{name:e,about:t})}},{key:"updateCurrentUserPhoto",value:function(e){return this._fetch(this._path.avatar,"PATCH",{avatar:e})}},{key:"getCards",value:function(){return this._fetch(this._path.cards)}},{key:"addNewCard",value:function(e,t){return this._fetch(this._path.cards,"POST",{name:e,link:t})}},{key:"removeCard",value:function(e){return this._fetch("".concat(this._path.cards,"/").concat(e),"DELETE")}},{key:"setLikeCardOn",value:function(e){return this._fetch("".concat(this._path.cards,"/likes/").concat(e),"PUT")}},{key:"setLikeCardOff",value:function(e){return this._fetch("".concat(this._path.cards,"/likes/").concat(e),"DELETE")}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-14",headers:{authorization:"23bbe762-c214-4ce4-b9fd-b26b33fa43ee","Content-Type":"application/json"}});function _(e){var t=r.a.useState(e.card.owner._id===e.currentUserId),a=Object(i.a)(t,2),n=a[0],c=(a[1],r.a.useState(e.card.likes.some((function(t){return t._id===e.currentUserId})))),o=Object(i.a)(c,2),l=o[0];o[1];return r.a.createElement("li",{className:"elements__element",onClick:function(){e.onCardClick(e.card)}},r.a.createElement("img",{src:e.card.link,alt:e.card.name,className:"elements__image"}),n?r.a.createElement("button",{className:"elements__remove"}):"",r.a.createElement("div",{className:"elements__caption"},r.a.createElement("p",{className:"elements__title"},e.card.name),r.a.createElement("div",{className:"elements__like"},r.a.createElement("button",{className:"elements__like-button ".concat(l?"elements__like-button_active":"")}),r.a.createElement("p",{className:"elements__like-counter"},e.card.likes.length))))}var f=a(7),h=a.n(f),E=a(8),b=a.n(E),v=a(9),N=a.n(v);function g(e){var t=r.a.useState(""),a=Object(i.a)(t,2),n=a[0],c=a[1],o=r.a.useState(""),l=Object(i.a)(o,2),s=l[0],p=l[1],u=r.a.useState(""),m=Object(i.a)(u,2),f=m[0],E=m[1],v=r.a.useState(h.a),g=Object(i.a)(v,2),k=g[0],C=g[1],y=r.a.useState([]),O=Object(i.a)(y,2),j=O[0],S=O[1];return r.a.useEffect((function(){console.log("refresh userinfo"),d.getCurrentUserInfo().then((function(e){c(e._id),p(e.name),E(e.about),C(e.avatar)})).catch((function(){console.error("can`t get userInfo")}))}),[]),r.a.useEffect((function(){console.log("refresh cards"),d.getCards().then((function(e){S(e)})).catch((function(){console.error("can`t get userInfo")}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__photo-overlay",onClick:e.onEditAvatar},r.a.createElement("img",{src:k,alt:"\u0424\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f",className:"profile__photo"})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("div",{className:"profile__title"},r.a.createElement("h1",{className:"profile__name"},s),r.a.createElement("button",{className:"profile__edit-btn",onClick:e.onEditProfile},r.a.createElement("img",{src:b.a,alt:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:"profile__edit-img"}))),r.a.createElement("p",{className:"profile__status"},f)),r.a.createElement("button",{className:"profile__add-btn",onClick:e.onAddPlace},r.a.createElement("img",{src:N.a,alt:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"profile__add-img"}))),r.a.createElement("ul",{className:"elements"},j.map((function(t){return r.a.createElement(_,{card:t,currentUserId:n,key:t._id,onCardClick:e.onCardClick})}))),e.children)}function k(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))}function C(e){return r.a.createElement("div",{className:"popup popup_".concat(e.name," ").concat(e.isOpen?"popup_opened":"")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{type:"button",className:"popup__close",onClick:e.onClose}),r.a.createElement("form",{className:"popup__form popup__form_edit-profile",name:"edit-profile"},r.a.createElement("h2",{className:"popup__heading"},e.title),e.children)))}function y(e){return console.log(e),r.a.createElement("div",{className:"popup popup_show-image ".concat(e.card?"popup_opened":"")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{type:"button",className:"popup__close",onClick:e.onClose}),r.a.createElement("figure",{className:"popup__figure"},r.a.createElement("img",{src:e.card?e.card.link:"#",alt:e.card?e.card.name:"",className:"popup__image"}),r.a.createElement("figcaption",{className:"popup__caption"},e.card?e.card.name:""))))}var O=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!1),o=Object(i.a)(c,2),l=o[0],u=o[1],m=r.a.useState(!1),d=Object(i.a)(m,2),_=d[0],f=d[1],h=r.a.useState(!1),E=Object(i.a)(h,2),b=E[0],v=E[1],N=r.a.useState(!1),O=Object(i.a)(N,2),j=(O[0],O[1]),S=r.a.useState(),w=Object(i.a)(S,2),x=w[0],U=w[1];function L(){n(!1),u(!1),f(!1),v(!1),j(!1),U()}return r.a.createElement("div",{className:"content"},r.a.createElement(p,{logo:s.a}),r.a.createElement(g,{onEditProfile:function(){n(!0)},onAddPlace:function(){u(!0)},onEditAvatar:function(){f(!0)},onCardClick:function(e){U(e)}},r.a.createElement(C,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"update-avatar",isOpen:_,onClose:L},r.a.createElement("label",{htmlFor:"input-update-avatar",className:"popup__field"},r.a.createElement("input",{type:"url",name:"avatar",id:"input-update-avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input popup__input_field_avatar",required:!0}),r.a.createElement("span",{className:"popup__input-error",id:"input-update-avatar-error"})),r.a.createElement("button",{type:"submit",className:"popup__save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),r.a.createElement(C,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit-profile",isOpen:a,onClose:L},r.a.createElement("label",{htmlFor:"input-profile-name",className:"popup__field"},r.a.createElement("input",{type:"text",name:"name",defaultValue:"",id:"input-profile-name",className:"popup__input popup__input_field_name",required:!0,minLength:"2",maxLength:"40"}),r.a.createElement("span",{className:"popup__input-error",id:"input-profile-name-error"})),r.a.createElement("label",{htmlFor:"input-profile-about",className:"popup__field"},r.a.createElement("input",{type:"text",name:"about",defaultValue:"",id:"input-profile-about",className:"popup__input popup__input_field_about",required:!0,minLength:"2",maxLength:"200"}),r.a.createElement("span",{className:"popup__input-error",id:"input-profile-about-error"})),r.a.createElement("button",{type:"submit",className:"popup__save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),r.a.createElement(C,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",isOpen:l,onClose:L},r.a.createElement("label",{htmlFor:"input-addcard-location",className:"popup__field"},r.a.createElement("input",{type:"text",name:"location",id:"input-addcard-location",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__input popup__input_field_location",required:!0,minLength:"1",maxLength:"30"}),r.a.createElement("span",{className:"popup__input-error",id:"input-addcard-location-error"})),r.a.createElement("label",{htmlFor:"input-addcard-image",className:"popup__field"},r.a.createElement("input",{type:"url",name:"image",id:"input-addcard-image",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input popup__input_field_image",required:!0}),r.a.createElement("span",{className:"popup__input-error",id:"input-addcard-image-error"})),r.a.createElement("button",{type:"submit",className:"popup__save"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")),r.a.createElement(C,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"remove-card",isOpen:b,onClose:L},r.a.createElement("button",{type:"submit",className:"popup__save"},"\u0414\u0430")),r.a.createElement(y,{card:x,onClose:L})),r.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.b189805a.chunk.js.map