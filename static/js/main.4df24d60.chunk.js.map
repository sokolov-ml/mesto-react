{"version":3,"sources":["images/profile__edit.svg","images/profile__add.svg","images/header__logo.svg","images/profile__photo.png","components/utils/Api.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Popup.js","components/PopupWithForm.js","components/PopupWithImage.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","api","options","this","_options","_url","baseUrl","_token","headers","authorization","_path","user","cards","avatar","path","method","body","fetch","JSON","stringify","then","res","ok","json","Promise","reject","status","_fetch","newName","newAbout","name","about","newImageUrl","link","cardId","Header","props","className","src","logo","alt","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","useState","likes","some","item","_id","isLiked","setIsLiked","length","likeCounter","setLikeCounter","onClick","owner","response","catch","console","log","title","map","join","Main","onEditAvatar","onEditProfile","imgEdit","onAddPlace","imgAdd","key","children","Footer","Popup","closeOnEsc","useCallback","evt","onClose","closeOnClickByOverlay","target","classList","contains","useEffect","isOpen","document","addEventListener","removeEventListener","type","PopupWithForm","onSubmit","PopupWithImage","EditAvatarPopup","onUpdateAvatar","inputAvatar","useRef","isLoading","setIsLoading","e","preventDefault","current","value","htmlFor","ref","id","placeholder","required","EditProfilePopup","setName","description","setDescription","onUpdateUser","minLength","maxLength","onChange","AddPlacePopup","setLink","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isRemoveCardPopupOpen","setIsRemoveCardPopupOpen","selectedCard","setSelectedCard","imgAvatar","setCurrentUser","setCards","closeAllPopups","getCards","result","error","getCurrentUserInfo","Provider","setLikeCardOff","setLikeCardOn","removeCard","filter","finally","obj","func","updateCurrentUserPhoto","updateCurrentUserInfo","addNewCard","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.4df24d60.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/profile__edit.58afbe73.svg\";","module.exports = __webpack_public_path__ + \"static/media/profile__add.bdfb8ebb.svg\";","module.exports = __webpack_public_path__ + \"static/media/header__logo.855a8c98.svg\";","module.exports = __webpack_public_path__ + \"static/media/profile__photo.62cf7cfc.png\";","class Api {\n  constructor(options) {\n    this._options = options;\n    this._url = options.baseUrl;\n    this._token = options.headers.authorization;\n    this._path = {\n      user: '/users/me',\n      cards: '/cards',\n      avatar: '/users/me/avatar',\n    };\n  }\n\n  _fetch(path, method = 'GET', body) {\n    return fetch(`${this._options.baseUrl}${path}`, {\n      headers: this._options.headers,\n      method: method,\n      body: JSON.stringify(body),\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  getCurrentUserInfo() {\n    return this._fetch(this._path.user);\n  }\n\n  updateCurrentUserInfo(newName, newAbout) {\n    return this._fetch(this._path.user, 'PATCH', {\n      name: newName,\n      about: newAbout,\n    });\n  }\n\n  updateCurrentUserPhoto(newImageUrl) {\n    return this._fetch(this._path.avatar, 'PATCH', {\n      avatar: newImageUrl,\n    });\n  }\n\n  getCards() {\n    return this._fetch(this._path.cards);\n  }\n\n  addNewCard(name, link) {\n    return this._fetch(this._path.cards, 'POST', {\n      name: name,\n      link: link,\n    });\n  }\n\n  removeCard(cardId) {\n    return this._fetch(`${this._path.cards}/${cardId}`, 'DELETE');\n  }\n\n  setLikeCardOn(cardId) {\n    return this._fetch(`${this._path.cards}/likes/${cardId}`, 'PUT');\n  }\n\n  setLikeCardOff(cardId) {\n    return this._fetch(`${this._path.cards}/likes/${cardId}`, 'DELETE');\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\n  headers: {\n    authorization: '23bbe762-c214-4ce4-b9fd-b26b33fa43ee',\n    'Content-Type': 'application/json',\n  },\n});\n\nexport default api;\n","import React from 'react';\r\n\r\nexport default function Header(props) {\r\n  return (\r\n    <header className='header'>\r\n      <img src={props.logo} alt='Логотип' className='header__logo' />\r\n    </header>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\r\n\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nexport default function Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  // const [cardId, setCardId] = React.useState(card._id);\r\n  const [isLiked, setIsLiked] = React.useState(card.likes.some((item) => item._id === currentUser._id));\r\n  const [likeCounter, setLikeCounter] = React.useState(card.likes.length);\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card._id, isLiked)\r\n      .then((response) => {\r\n        setLikeCounter(response.likes.length);\r\n        setIsLiked(!isLiked);\r\n      })\r\n      .catch(() => {\r\n        console.log('can`t render like');\r\n      });\r\n  }\r\n\r\n  return (\r\n    <li className='elements__element'>\r\n      <img src={card.link} alt={card.name} className='elements__image' onClick={handleClick} />\r\n      {card.owner._id === currentUser._id ? (\r\n        <button className='elements__remove' onClick={() => onCardDelete(card._id)}></button>\r\n      ) : (\r\n        ''\r\n      )}\r\n      <div className='elements__caption'>\r\n        <p className='elements__title'>{card.name}</p>\r\n        <div className='elements__like'>\r\n          <button\r\n            className={`elements__like-button ${isLiked ? 'elements__like-button_active' : ''}`}\r\n            onClick={handleLikeClick}\r\n            title={card.likes.map((user) => user.name).join(', ')}\r\n          ></button>\r\n          <p className='elements__like-counter'>{likeCounter}</p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Card from './Card';\r\n\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nimport imgEdit from '../images/profile__edit.svg';\r\nimport imgAdd from '../images/profile__add.svg';\r\n\r\nexport default function Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n      <section className='profile'>\r\n        <div className='profile__photo-overlay' onClick={props.onEditAvatar}>\r\n          <img src={currentUser.avatar} alt='Фото профиля' className='profile__photo' />\r\n        </div>\r\n        <div className='profile__info'>\r\n          <div className='profile__title'>\r\n            <h1 className='profile__name'>{currentUser.name}</h1>\r\n            <button className='profile__edit-btn' onClick={props.onEditProfile}>\r\n              <img src={imgEdit} alt='Редактировать' className='profile__edit-img' />\r\n            </button>\r\n          </div>\r\n          <p className='profile__status'>{currentUser.about}</p>\r\n        </div>\r\n        <button className='profile__add-btn' onClick={props.onAddPlace}>\r\n          <img src={imgAdd} alt='Добавить' className='profile__add-img' />\r\n        </button>\r\n      </section>\r\n      <ul className='elements'>\r\n        {props.cards.map((card) => (\r\n          <Card\r\n            key={card._id}\r\n            card={card}\r\n            onCardClick={props.onCardClick}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}\r\n          />\r\n        ))}\r\n      </ul>\r\n      {props.children}\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <footer className='footer'>\r\n      <p className='footer__copyright'>&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nfunction Popup(props) {\r\n  const closeOnEsc = React.useCallback((evt) => {\r\n    if (evt.key === 'Escape') props.onClose();\r\n  }, []);\r\n\r\n  const closeOnClickByOverlay = React.useCallback((evt) => {\r\n    if (evt.target.classList.contains('popup')) props.onClose();\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (props.isOpen === true) {\r\n      document.addEventListener('keydown', closeOnEsc);\r\n      document.addEventListener('mousedown', closeOnClickByOverlay);\r\n    } else {\r\n      document.removeEventListener('keydown', closeOnEsc);\r\n      document.removeEventListener('mousedown', closeOnClickByOverlay);\r\n    }\r\n  }, [props, closeOnEsc, closeOnClickByOverlay]);\r\n\r\n  return (\r\n    <div>\r\n      <div className={`popup ${props.isOpen ? 'popup_opened' : ''}`}>\r\n        <div className='popup__container'>\r\n          <button type='button' className='popup__close' onClick={props.onClose}></button>\r\n          {props.children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Popup;\r\n","import React from 'react';\nimport Popup from './Popup';\n\nexport default function PopupWithForm(props) {\n  return (\n    <Popup isOpen={props.isOpen} onClose={props.onClose}>\n      <form className='popup__form popup__form_edit-profile' name='edit-profile' onSubmit={props.onSubmit}>\n        <h2 className='popup__heading'>{props.title}</h2>\n        {props.children}\n      </form>\n    </Popup>\n  );\n}\n","import React from 'react';\r\nimport Popup from './Popup';\r\n\r\nexport default function PopupWithImage(props) {\r\n  return (\r\n    <Popup isOpen={props.card ? true : false} onClose={props.onClose}>\r\n      <figure className='popup__figure'>\r\n        <img\r\n          src={props.card ? props.card.link : '#'}\r\n          alt={props.card ? props.card.name : ''}\r\n          className='popup__image'\r\n        />\r\n        <figcaption className='popup__caption'>{props.card ? props.card.name : ''}</figcaption>\r\n      </figure>\r\n    </Popup>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ onUpdateAvatar, ...props }) {\r\n  const inputAvatar = React.useRef();\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    console.log(inputAvatar.current.value);\r\n    onUpdateAvatar(\r\n      {\r\n        avatar: inputAvatar.current.value,\r\n      },\r\n      setIsLoading\r\n    );\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm title='Обновить аватар' name='update-avatar' {...props} onSubmit={handleSubmit}>\r\n      <label htmlFor='input-update-avatar' className='popup__field'>\r\n        <input\r\n          ref={inputAvatar}\r\n          type='url'\r\n          name='avatar'\r\n          id='input-update-avatar'\r\n          placeholder='Ссылка на картинку'\r\n          className='popup__input popup__input_field_avatar'\r\n          required\r\n        />\r\n        <span className='popup__input-error' id='input-update-avatar-error' />\r\n      </label>\r\n      <button type='submit' className='popup__save'>\r\n        {isLoading ? 'Сохранение...' : 'Сохранить'}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    props.onUpdateUser(\r\n      {\r\n        name,\r\n        about: description,\r\n      },\r\n      setIsLoading\r\n    );\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm title='Редактировать профиль' name='edit-profile' {...props} onSubmit={handleSubmit}>\r\n      <label htmlFor='input-profile-name' className='popup__field'>\r\n        <input\r\n          type='text'\r\n          name='name'\r\n          id='input-profile-name'\r\n          className='popup__input popup__input_field_name'\r\n          required\r\n          minLength='2'\r\n          maxLength='40'\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        <span className='popup__input-error' id='input-profile-name-error' />\r\n      </label>\r\n      <label htmlFor='input-profile-about' className='popup__field'>\r\n        <input\r\n          type='text'\r\n          name='about'\r\n          id='input-profile-about'\r\n          className='popup__input popup__input_field_about'\r\n          required\r\n          minLength='2'\r\n          maxLength='200'\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n        <span className='popup__input-error' id='input-profile-about-error' />\r\n      </label>\r\n      <button type='submit' className='popup__save'>\r\n        {isLoading ? 'Сохранение...' : 'Сохранить'}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n  const [name, setName] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onAddPlace(\r\n      {\r\n        name,\r\n        link,\r\n      },\r\n      setIsLoading\r\n    );\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm title='Новое место' name='add-card' {...props} onSubmit={handleSubmit}>\r\n      <label htmlFor='input-addcard-location' className='popup__field'>\r\n        <input\r\n          type='text'\r\n          name='location'\r\n          id='input-addcard-location'\r\n          placeholder='Название'\r\n          className='popup__input popup__input_field_location'\r\n          required\r\n          minLength='1'\r\n          maxLength='30'\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        <span className='popup__input-error' id='input-addcard-location-error' />\r\n      </label>\r\n      <label htmlFor='input-addcard-image' className='popup__field'>\r\n        <input\r\n          type='url'\r\n          name='image'\r\n          id='input-addcard-image'\r\n          placeholder='Ссылка на картинку'\r\n          className='popup__input popup__input_field_image'\r\n          value={link}\r\n          onChange={(e) => setLink(e.target.value)}\r\n          required\r\n        />\r\n        <span className='popup__input-error' id='input-addcard-image-error' />\r\n      </label>\r\n      <button type='submit' className='popup__save'>\r\n        {isLoading ? 'Создание...' : 'Создать'}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\n\nimport api from './components/utils/Api';\nimport Header from './components/Header';\nimport Main from './components/Main';\nimport Footer from './components/Footer';\nimport PopupWithForm from './components/PopupWithForm';\nimport PopupWithImage from './components/PopupWithImage';\nimport EditAvatarPopup from './components/EditAvatarPopup';\nimport EditProfilePopup from './components/EditProfilePopup';\nimport AddPlacePopup from './components/AddPlacePopup';\n\nimport { CurrentUserContext } from './contexts/CurrentUserContext.js';\n\nimport './App.css';\nimport logo from './images/header__logo.svg';\nimport imgAvatar from './images/profile__photo.png';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isRemoveCardPopupOpen, setIsRemoveCardPopupOpen] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState();\n  const [currentUser, setCurrentUser] = React.useState({ name: '', about: '', avatar: imgAvatar });\n  // const currentUser = React.createContext();\n\n  const [cards, setCards] = React.useState([]);\n  React.useEffect(() => {\n    api\n      .getCards()\n      .then((result) => {\n        setCards(result);\n      })\n      .catch(() => {\n        console.error('can`t get userInfo');\n      });\n  }, []);\n\n  function handleCardLike(cardId, isLiked) {\n    if (isLiked) {\n      return api.setLikeCardOff(cardId).catch(() => {\n        console.error('can`t unset like');\n      });\n    } else {\n      return api.setLikeCardOn(cardId).catch(() => {\n        console.error('can`t set like');\n      });\n    }\n  }\n\n  function handleCardDelete(cardId) {\n    api\n      .removeCard(cardId)\n      .then(() => {\n        setCards(cards.filter((card) => card._id !== cardId));\n        // popupRemoveCard.close();\n      })\n      .catch(() => {\n        console.error('can`t delete cards');\n      })\n      .finally(() => {\n        // popupRemoveCard._saveButton.textContent = 'Да';\n      });\n  }\n\n  React.useEffect(() => {\n    api\n      .getCurrentUserInfo()\n      .then((result) => {\n        setCurrentUser(result);\n      })\n      .catch(() => {\n        console.error('can`t get userInfo');\n      });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsRemoveCardPopupOpen(false);\n    setSelectedCard();\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleUpdateUser(obj, func) {\n    func(true);\n    api\n      .updateCurrentUserInfo(obj.name, obj.about)\n      .then((response) => {\n        setCurrentUser(response);\n        closeAllPopups();\n      })\n      .catch(() => {\n        console.error('can`t update userinfo');\n      })\n      .finally(() => {\n        func(false);\n      });\n  }\n\n  function handleUpdateAvatar(obj, func) {\n    func(true);\n    api\n      .updateCurrentUserPhoto(obj.avatar)\n      .then((response) => {\n        setCurrentUser(response);\n        closeAllPopups();\n      })\n      .catch(() => {\n        console.error('can`t update user avatar');\n      })\n      .finally(() => {\n        func(false);\n      });\n  }\n\n  function handleAddPlaceSubmit(obj, func) {\n    func(true);\n    api\n      .addNewCard(obj.name, obj.link)\n      .then((response) => {\n        setCards([response, ...cards]);\n        closeAllPopups();\n      })\n      .catch(() => {\n        console.error('can`t add card');\n      })\n      .finally(() => {\n        func(false);\n      });\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className='content'>\n        <Header logo={logo} />\n\n        <Main\n          cards={cards}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n        >\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n\n          <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\n\n          <PopupWithForm title='Вы уверены?' name='remove-card' isOpen={isRemoveCardPopupOpen} onClose={closeAllPopups}>\n            <button type='submit' className='popup__save'>\n              Да\n            </button>\n          </PopupWithForm>\n          <PopupWithImage card={selectedCard} onClose={closeAllPopups}></PopupWithImage>\n        </Main>\n        <Footer />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}